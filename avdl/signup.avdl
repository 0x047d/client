
@namespace("keybase.1")
protocol signup {

	import idl "common.avdl";

	record CheckUsernameAvailableRes {
		Status status;
	}

	record CheckUsernameAvailableArg {
		string username;
	}

	record SignupArg {
		string email;
		string inviteCode;
		string passphrase;
		string username;
	}

	record InviteRequestArg {
		string email;
		string fullname;
		string notes;
	}

	record InviteRequestResBody {
		string code;
		int place;
	}

	record InviteRequestRes {
		union { null, InviteRequestResBody } body;
		Status status;
	}

	record SignupResSuccess {
		UID uid;
	}

	record SignupResBody {
		union { null, SignupResSuccess } success;
		boolean passphraseOk;
		boolean postOk;
		boolean writeOk;
	}

	record SignupRes {
		SignupResBody body;
		Status status;
	}

	CheckUsernameAvailableRes CheckUsernameAvailable(CheckUsernameAvailableArg arg);
	SignupRes Signup(SignupArg arg);
	InviteRequestRes InviteRequest(InviteRequestArg arg);
}
